# ============================================
# SonarQube Configuration for Angular Project
# ============================================

# Required: Project identification
sonar.projectKey=my-angular-app
sonar.projectName=My Angular App
sonar.projectVersion=1.0.0

# Source code location
sonar.sources=src
sonar.tests=src
sonar.test.inclusions=**/*.spec.ts
sonar.exclusions=**/node_modules/**,**/*.spec.ts,**/test.ts,**/environments/**

# TypeScript configuration
sonar.typescript.lcov.reportPaths=coverage/my-angular-app/lcov.info
sonar.typescript.tsconfigPath=tsconfig.json

# Test execution report (from karma-sonarqube-reporter)
sonar.testExecutionReportPaths=reports/ut_report.xml

# Code coverage
sonar.javascript.lcov.reportPaths=coverage/my-angular-app/lcov.info

# Encoding
sonar.sourceEncoding=UTF-8

# ============================================
# Quality Gate Thresholds (fail build if not met)
# ============================================
# These are enforced by SonarQube server, but documented here:
# - Coverage on new code >= 80%
# - Duplicated lines on new code <= 3%
# - Maintainability rating = A
# - Reliability rating = A
# - Security rating = A

# ============================================
# Local Development Settings
# ============================================
# Uncomment and modify for local SonarQube server
# sonar.host.url=http://localhost:9000
# sonar.token=your-sonar-token

# For SonarCloud (uncomment if using SonarCloud)
# sonar.organization=your-org-key
# sonar.host.url=https://sonarcloud.io

# ============================================
# Issue Severity Overrides
# ============================================
# Treat security hotspots as blockers
sonar.issue.ignore.multicriteria=e1

# Ignore specific rules in test files (optional)
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S1186
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.spec.ts

# ============================================
# Branch Analysis (for CI)
# ============================================
# These are typically set via CI environment variables:
# sonar.branch.name=${BRANCH_NAME}
# sonar.pullrequest.key=${PR_NUMBER}
# sonar.pullrequest.branch=${PR_BRANCH}
# sonar.pullrequest.base=${PR_BASE}

